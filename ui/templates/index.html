<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Forecast - Deep Learning Demo</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="icon" href="/images/webicon.svg" type="image/svg+xml">
    <link rel="shortcut icon" href="/images/webicon.svg">
    <link rel="apple-touch-icon" href="/images/webicon.svg">
    <meta name="theme-color" content="#ffffff">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üß† Invoice Forecast - Deep Learning Demo</h1>
            <p>Paper Invoice OCR ‚Üí Import Quantity Prediction using CNN and LSTM</p>
        </div>

        <!-- Models Grid -->
        <div class="models-grid">
            <!-- Model 1: Image OCR (Paper Invoice ‚Üí Electronic Invoice) -->
            <div class="model-card">
                <div class="model-header">
                    <div class="model-title">
                        <h2>Model 1: CNN</h2>
                        <p>Paper Invoice ‚Üí Electronic Invoice (OCR)</p>
                    </div>
                    <div class="model-icon">üñºÔ∏è</div>
                </div>

                <div class="model-body">
                    <div class="input-section">
                        <label class="input-label">üì§ Upload Paper Invoice Images (2-3 invoices)</label>
                        <div class="file-upload-btn" id="fileUploadBtn">
                            <i class="fas fa-cloud-upload-alt"></i> Click or drag multiple invoice images
                        </div>
                        <input type="file" id="fileInput" accept="image/*,.pdf" multiple>
                        <div class="file-name" id="fileName"></div>
                        <div id="filePreview" style="margin-top: 10px; display: flex; gap: 10px; flex-wrap: wrap;">
                        </div>
                    </div>

                    <button class="predict-btn" onclick="predictModel1()" id="predictBtn1">
                        <i class="fas fa-magic"></i> Convert to Electronic Invoice (OCR)
                    </button>

                    <div class="loading" id="loading1">
                        <div class="spinner"></div>
                        <p class="spinner-text">Extracting text from image with CNN...</p>
                    </div>

                    <div class="results-section" id="results1">
                        <div class="results-title">üìÑ Electronic Invoice (Y1) - Extracted Products</div>
                        <div class="result-box" id="resultBox1">
                            <div class="no-result">No results yet</div>
                        </div>
                        <div id="productList" style="margin-top: 15px;"></div>
                    </div>
                </div>
            </div>

            <!-- Model 2: Quantity Prediction -->
            <div class="model-card">
                <div class="model-header">
                    <div class="model-title">
                        <h2>Model 2: LSTM</h2>
                        <p>Import Quantity Prediction</p>
                    </div>
                    <div class="model-icon">üß†</div>
                </div>

                <div class="model-body">
                    <div class="input-section">
                        <label class="input-label">üìä Current Invoice Data (from Model 1 or manual input)</label>
                        <textarea class="input-textarea" id="model2Input"
                            placeholder="Enter structured invoice data (product names, quantities)...&#10;Example:&#10;Coca Cola - 50&#10;Pepsi - 30&#10;Water - 100"></textarea>
                    </div>

                    <button class="predict-btn" onclick="predictModel2()" id="predictBtn2">
                        <i class="fas fa-chart-line"></i> Predict Next Import Quantities
                    </button>

                    <div class="loading" id="loading2">
                        <div class="spinner"></div>
                        <p class="spinner-text">Analyzing historical data with LSTM...</p>
                    </div>

                    <div class="results-section" id="results2">
                        <div class="results-title">üìà Predicted Import Quantities (Y2)</div>
                        <div class="result-box" id="resultBox2">
                            <div class="no-result">No results yet</div>
                        </div>
                        <div class="prediction-result-section"
                            style="margin-top: 15px; padding: 15px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px;">
                            <h4 style="margin: 0 0 10px 0; color: #856404; font-size: 14px;">üîÆ Prediction Result
                                (Coming Soon)</h4>
                            <p style="margin: 0; color: #856404; font-size: 13px; line-height: 1.4;">
                                This section will display the LSTM model's prediction for future import quantities based
                                on historical data patterns.
                                <br><em>Backend implementation in progress...</em>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recognized Products Area (Below Models Grid) -->
        <div id="recognizedArea" class="recognized-area">
            <div class="recognized-container">
                <h3 class="recognized-title">
                    <i class="fas fa-list-check"></i>
                    Recognized Products (Extracted from Invoices)
                </h3>

                <div id="recognizedSummary" class="recognized-summary">
                    <!-- Summary will be injected here -->
                </div>

                <div id="recognizedProductTable">
                    <!-- Product table will be injected here -->
                </div>

                <div class="recognized-ready">
                    <p>
                        <i class="fas fa-check-circle"></i>
                        Products ready for Model 2 prediction!
                    </p>
                </div>
            </div>
        </div>

        <!-- Info Section -->
        <div class="info-section">
            <h3>‚ÑπÔ∏è How It Works</h3>
            <ul>
                <li><strong>Model 1 (CNN):</strong> Upload 2-3 paper invoice images ‚Üí OCR extracts product lines as
                    separate entries</li>
                <li><strong>Product Extraction:</strong> Each product is parsed individually (name, quantity) and
                    displayed in a table</li>
                <li><strong>Model 2 (LSTM):</strong> Uses extracted products + historical data to predict future import
                    quantities</li>
                <li><strong>Data Flow:</strong> Multiple Paper Invoices (X1) ‚Üí Electronic Products List (Y1=X2) ‚Üí
                    Predicted Quantities (Y2)</li>
                <li><strong>Auto-populate:</strong> Extracted products automatically fill Model 2 input for seamless
                    workflow</li>
                <li><strong>Database Ready:</strong> Backend will store both invoice images and extracted product data
                </li>
            </ul>
        </div>
    </div>

    <script src="/static/script.js"></script>
</body>

</html>